<!Doctype html>
<html lang="en-US" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>消息管理</title>
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/normalize.css" />
    <style>
        body {
            background-color: #fafafa;
            font-family: 'Microsoft yahei';
        }

        .container {
            margin-top: 100px;
        }

        h1 {
            padding-bottom: 30px;
        }

        .manageTitle {
            display: flex;
            justify-content: center;
        }

        .footer {
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body>
<div class="page-header manageTitle">
    <h1>不洗碗工作室日常新闻管理</h1>
</div>
<div class="container">
    <div class="row">
        <div class="col-sm-6 col-sm-offset-3">

            <div class="addel">

                <h2>消息管理</h2>

                <div class="form-group target">
                    <div class="input-group">
                        <input type="text" name="contacts[]" class="form-control" value="文章一">
                        <span class="input-group-btn">
						<button type="button" class="btn btn-default" aria-label="Left Align">
							  <i class="glyphicon glyphicon-pencil" aria-hidden="true"></i>
						</button>
						<button type="button" class="btn btn-danger addel-delete">
							<i class="fa fa-remove"></i>
						</button>
					</span>
                    </div>
                </div>

                <div class="form-group target">
                    <div class="input-group">
                        <input type="text" name="contacts[]" class="form-control" id="abc" value="文章二">
                        <span class="input-group-btn">
						<button type="button" class="btn btn-default" aria-label="Left Align">
							  <i class="glyphicon glyphicon-pencil" aria-hidden="true"></i>
						</button>
						<button type="button" class="btn btn-danger addel-delete">
							<i class="fa fa-remove"></i>
						</button>
					</span>
                    </div>
                </div>

                <button type="button" class="btn btn-success btn-block addel-add"><i class="fa fa-plus"></i></button>

                <nav aria-label="Page navigation" class="footer">
                    <ul class="pagination">
                        <li>
                            <a href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li>
                            <a href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
<script src="js/jquery-1.12.3.min.js"></script>
<script src="js/addel.jquery.js"></script>
<script>
  $(document).ready(function () {
    $('.addel').addel({
      classes: {
        target: 'target'
      },
      animation: {
        duration: 300
      }
    }).on('addel:delete', function (event) {
      if (!window.confirm('Are you absolutely positive you would like to delete: ' + '"' + event.target.find(':input').val() + '"?')) {
        event.preventDefault()
      }
    })
    //创建新文章
    $('.addel-add').click(function () {
        var token = window.localStorage.getItem('token');
        console.log(token);
        $.ajax({
          type: 'get',
          url: 'http://hrsoft.net/posts/8197',
         /* headers:{
            'token':token
          },
          beforeSend: function (request) {
            request.setRequestHeader('token', token);
          },*/
          dataType: 'JSON',
          success: function (result) {
            if (result.code == 0) {
              /*window.location.href = 'markdown.html';*/
              console.log("success");
              $("#abc").attr("value","456");
            }
          }
        })
        /*fetch方法
         function fetchDemo() {
         fetch("http://hrsoft.net/posts",{method:'POST',headers:new Headers({'Content-type':'json'}),
         mode : 'cors'
         }).then(function(response) {
         return response.json();
         }).then(function(json) {
         console.log(json);
         });
         }
         fetchDemo();*/
      }
    )
    //修改文章內容
    $('.glyphicon-pencil').click(function () {
        var page = window.localStorage.getItem('page');
        var token = window.localStorage.getItem('token');
        console.log(token);
        $.ajax({
          type: "put",
          url: 'http://hrsoft.net/posts/8197',
          beforeSend: function (request) {
            request.setRequestHeader('token', token)
          },
          dataType: 'JSON',
          success: function (result) {
            if (result.code == 0) {
              window.location.href = 'markdown.html';
              console.log("success");
            }
          }
        })
      }
    )
  })
</script>
</body>
</html>

